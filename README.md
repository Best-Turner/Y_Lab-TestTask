# Monitoring-Service

## Описание

Этот проект представляет собой веб-сервис для подачи показаний счетчиков отопления, горячей и холодной воды. Показания
можно подавать один раз в месяц. Ранее поданные показания редактировать запрещено. Последние поданные показания
считаются актуальными. Пользователь может видеть только свои показания, администратор может видеть показания всех
пользователей.

## Задание №1

- Предусмотреть расширение перечня подаваемых показаний.
- Данные хранятся в памяти приложения.
- Приложение должно быть консольным (без использования Spring, взаимодействия с БД и т. д., только Java Core и
  коллекции).
- Регистрация пользователя.
- Авторизация пользователя.
- Аудит действий пользователя (авторизация, завершение работы, подача показаний, получение истории подачи показаний и т.
  д.).

## Задание №2

- Репозитории теперь должны писать все сущности в БД PostgreSQL
- Идентификаторы при сохранении в БД должны выдаваться через sequence
- DDL-скрипты на создание таблиц и скрипты на предзаполнение таблиц должны выполняться только инструментом миграции
  Liquibase
- Скрипты миграции Liquibase должны быть написаны только в нотации XML
- Скриптов миграции должно быть несколько. Как минимум один на создание всех таблиц, другой - на предзаполнение данными
- Служебные таблицы должны быть в отдельной схеме
- Таблицы сущностей хранить в схеме public запрещено
- В тестах необходимо использовать test-containers
- В приложении должен быть docker-compose.yml, в котором должны быть прописаны инструкции для развертывания postgre в
  докере. Логин, пароль и база должны быть отличными от тех, что прописаны в образе по умолчанию. Приложение должно
  работать с БД, развернутой в докере с указанными параметрами.
- Приложение должно поддерживать конфиг-файлы. Всё что относится к подключению к БД, а также к миграциям, должно быть
  сконфигурировано через конфиг-файл

### Аудит действий пользователя

- Система должна вести аудит действий пользователя, включая авторизацию, завершение работы, подачу показаний, получение
  истории подачи показаний и т. д.

## Запуск

Чтобы запустить приложение, выполните следующие шаги:

1. Клонирование репозитория:

`https://github.com/Best-Turner/Y_Lab-TestTask.git`

2. Запуск БД в докере:

`docker-compose up`
3. Запуск приложения:
- Перейти в папку

          `/target`

-  Командой запустить приложение:

   `java -jar MonitoringService-1.0-SNAPSHOT.jar`

*___Для тестирования приложения добавлено два пользователя:___*

| Пользователь  | Логин | Пароль |
|---------------|-------|-----|
| Администратор |admin@mail.ru| 1234|
| Пользователь  |user@mail.ru| 1234 |




<h3>Скрин работы программы:</h3>

**Старт программы(начальное меню)**

![Начальное меню](images/Начальное%20меню.jpg)

**Меню аутентификации**

![Меню аутентификации](images/Меню%20аутентификации.jpg)

**Меню администратора**

![Меню администратора](images/Меню%20администратора.jpg)

**Меню пользователя**

![Меню пользователя](images/Меню%20пользователя.jpg)

**Все пользователи. Доступно только для администратора**

![Все пользователи](images/Получение%20всех%20пользователь(для%20администратора).jpg)

**Получение подробной информации о пользователе. для администратора**

![Информация о пользователе](images/Получение%20подробной%20информации%20о%20пользователе(для%20администратора).jpg)

**Получить историю передачи данных**

![История передачи данных](images/Получить%20историю%20передачи%20данных%20счетчика.jpg)